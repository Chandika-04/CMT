{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% load crispy_forms_utils %}
{% load crispy_forms_field %}
{% block title %}Officer Election Report{{ object.name }}{% endblock %}
{% block content %}
  {{ formset.media }}
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.0-alpha14/js/tempusdominus-bootstrap-4.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.0-alpha14/css/tempusdominus-bootstrap-4.min.css" />
{% specialspaceless %}
  <h1>Please select members to update role:</h1>
  <form action="" method="post">
    {% csrf_token %}
    <link href="{% static 'css/project.css' %}" rel="stylesheet">
    <div>{{ formset.management_form|crispy }}</div>
{#    {% crispy formset helper %}#}
    {% if formset.non_form_errors %}
    <div class="alert alert-block alert-danger">
        {% if formset_error_title %}<h4 class="alert-heading">{{ formset_error_title }}</h4>{% endif %}
        <ul>
            {{ formset.non_form_errors|unordered_list }}
        </ul>
    </div>
  {% endif %}
  <table{% if form_id %} id="{{ form_id }}_table"{% endif%} class="table table-striped table-sm">
        <thead>
            {% if formset.readonly and not formset.queryset.exists %}
            {% else %}
                <tr>
                  <th class="requiredField" style="width: 20%">Member<span class="asteriskField">*</span></th>
                  <th class="requiredField" style="width: 30%">New Role<span class="asteriskField">*</span></th>
                  <th class="requiredField" style="width: 15%">Start Date<span class="asteriskField">*</span></th>
                  <th class="requiredField" style="width: 15%">End Date<span class="asteriskField">*</span></th>
                  <th style="width: 5%">Remove</th>
                </tr>
            {% endif %}
        </thead>
        <tbody>
            <tr class="d-none empty-form">
                {% for field in formset.empty_form %}
                    {% include 'bootstrap4/field.html' with tag="td" form_show_labels=False %}
                {% endfor %}
            </tr>
            {% for form in formset %}
                {% if form_show_errors and not form.is_extra %}
                    {% include "bootstrap4/errors.html" %}
                {% endif %}
                  <tr>
                      {% for field in form %}
                        {% if field.label == "Start Date" or field.label == "End Date"%}
                          <td>
                          <div style="position: relative">
                            {% crispy_field field %}
                            {% if field.errors %}
                              {% for error in field.errors %}
                                <strong style="color:red">{{ error }}</strong>
                              {% endfor %}
                            {% endif %}
                          </div>
                          </td>
{#                        {% elif field.label == "Selected" %}#}
{#                          <td>#}
{#                          {% if form.initial %}#}
{#                            <input class="btn btn-danger" type="submit" name="action" value="- {{ form.initial|get_item:'user' }}">#}
{#                          {% else %}#}
{#                            <input class="btn btn-success" type="submit" name="action" value="+">#}
{#                          {% endif %}#}
{#                          </td>#}
                        {% else %}
                          {% include 'bootstrap4/field.html' with tag="td" form_show_labels=False %}
                          {% if field.errors %}
                            {% for error in field.errors %}
                              <strong style="color:red">{{ error }}</strong>
                            {% endfor %}
                        {% endif %}
                        {% endif %}
                      {% endfor %}
                  </tr>
            {% endfor %}
        </tbody>
    </table>
    <input class="btn btn-success" type="submit" name="action" value="Add Row">
    <input type="{{ input.input_type }}"
    name="{% if input.name|wordcount > 1 %}{{ input.name|slugify }}{% else %}{{ input.name }}{% endif %}"
    value="{{ input.value }}"
    {% if input.input_type != "hidden" %}
        class="{{ input.field_classes }}"
        id="{% if input.id %}{{ input.id }}{% else %}{{ input.input_type }}-id-{{ input.name|slugify }}{% endif %}"
    {% endif %}
    {{ input.flat_attrs|safe }}
    />
  </form>
{% endspecialspaceless %}
  {% block footer %}
  {% endblock %}
{% endblock content %}

